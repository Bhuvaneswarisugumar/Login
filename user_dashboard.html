<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>User Dashboard</title>
    <style>
        body{ font-family: Arial, Helvetica, sans-serif; background:#f4f7fb; margin:0; }
        .wrap{ max-width:900px; margin:40px auto; padding:20px; background:#fff; border-radius:12px; box-shadow:0 8px 20px rgba(11,99,198,0.05) }
        h1{ color:#0b63c6 }
        p{ color:#334a55 }
        .btn-logout{ background:#cc2f2f; color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer }
    </style>
</head>
<body>
    <div class="wrap">
        <h1>Welcome, <span id="uname">User</span></h1>
        <p id="uemail">Email: -</p>
        <p id="lastLogin">Last login: -</p>
        <button class="btn-logout" id="logoutBtn">Logout</button>
    </div>

<script>
    const cur = JSON.parse(localStorage.getItem("currentUser") || "null");
    if (!cur) {
        // not logged in - redirect to login page
        window.location.href = "login.html";
    } else {
        const users = JSON.parse(localStorage.getItem("users") || "[]");
        const u = users.find(x => (x.email || "").toLowerCase() === (cur.email || "").toLowerCase());
        document.getElementById("uname").textContent = u?.name || "User";
        document.getElementById("uemail").textContent = "Email: " + (u?.email || cur.email);
        document.getElementById("lastLogin").textContent = "Last login: " + (u?.lastLogin || "Not recorded");
    }

    document.getElementById("logoutBtn").addEventListener("click", function(){
        localStorage.removeItem("currentUser");
        window.location.href = "login.html";
    });
</script>
</body>
</html>
